#:kivy 1.7.2
#:import Colors Config.WIDGET_COLORS
#:import Sizes Config.WIDGET_SIZES
#:import os os
#:import WidgetElements WidgetElements

<MsvScreen@BoxLayout>
    pos: root.pos
    size: root.size

    msvPos: 0.0
    msvVel: 0.0
    msvAcc: 0.0
    currentBPM: 0.0
    padding: 3

    canvas:
        Color:
            rgba: Colors.WIDGET_GREY_LIGHT

        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        pos: root.pos
        size: root.size
        padding: 2
        orientation: 'horizontal'

        canvas:
            Color:
                rgba: Colors.WIDGET_BPM_SCREEN_COLOR

            Rectangle:
                pos: self.pos
                size: self.size

        BoxLayout:
            orientation: "vertical"
            spacing: 2
            Label:
                size_hint: 1.0, 0.2
                text: "MVC Status"
                font_size: self.height / 1.2

            Label:
                size_hint: 1.0, 0.5
                text: str(root.msvPos)
                font_size: self.height
                #font_name: os.getenv("FILE_PATH")+"/mono.ttf"

            BoxLayout:
                size_hint: 1.0, 0.3
                Label:
                    text: "LIVE"
                    font_size: self.height / 1.2
                    size_hint: 0.25, 1.0
                Label:
                    text: "BPM: " + str(root.currentBPM)
                    font_size: self.height / 1.2
                    size_hint: 0.25, 1.0
                Label:
                    text: "Vel: " + str(root.msvVel)
                    font_size: self.height / 1.2
                    size_hint: 0.25, 1.0
                Label:
                    text: "Acc: " + str(root.msvAcc)
                    font_size: self.height / 1.2
                    size_hint: 0.25, 1.0


<SimpleMsvController>
    msvPosition: 0.0
    msvVelocity: 0.0
    msvAcceleration: 0.0
    currentBPM: 0.0

    BoxLayout:
        orientation: 'vertical'
        padding: Sizes.WIDGET_BORDER
        spacing: Sizes.WIDGET_SPACING

        pos: root.pos
        size: root.size

        canvas:
            Color:
                rgba: Colors.WIDGET_BACKGROUND_DARK
            Rectangle:
                pos: self.pos
                size: self.size

        WidgetHeader:
            title: "MSV Controller"
            size_hint_x: 1
            size_hint_y: None
            height: Sizes.HEADER_FONT_SIZE

        BoxLayout:
            size: root.size
            pos: root.pos
            orientation: "vertical"

            padding: 5

            canvas:
                Color:
                    rgba: Colors.WIDGET_BACKGROUND_LIGHT
                Rectangle:
                    pos: self.pos
                    size: self.size

            MsvScreen:
                msvPos: str(root.msvPosition)
                msvAcc: str(root.msvAcceleration)
                msvVel: str(root.msvVelocity)
                currentBPM: str(root.currentBPM)
                size_hint: 1.0, 0.6

            BoxLayout:
                spacing: 5
                size_hint: 1.0, 0.4
                LightButton:
                    text: "TRIGGER A"
                    font_size: self.height / 2
                    on_press: root.setSourceForBpm("A")

                LightButton:
                    text: "TRIGGER B"
                    font_size: self.height / 2
                    on_press: root.setSourceForBpm("B")

